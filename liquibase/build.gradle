plugins {
	id 'org.liquibase.gradle' version '2.2.1'
    id 'groovy'
}

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.mongodb:mongodb-driver-core:5.0.0'
    implementation 'org.mongodb:mongodb-driver-sync:5.0.0'
    implementation 'org.mongodb:bson:4.1.1'
    implementation 'org.liquibase.ext:liquibase-mongodb:4.3.2'

    liquibaseRuntime 'org.liquibase:liquibase-core:4.26.0'
    liquibaseRuntime 'org.liquibase:liquibase-groovy-dsl:3.0.3'
    liquibaseRuntime 'info.picocli:picocli:4.7.5'
    liquibaseRuntime 'org.yaml:snakeyaml:1.33'
    liquibaseRuntime 'org.liquibase.ext:liquibase-mongodb:4.24.0'
}

liquibase {
	def props = new Properties()
	file("liquibase.properties").withDataInputStream {
		props.load(it)
	}

	activities {
		main {
			changelogFile props.getProperty('changelogFile')
			url props.getProperty('url')
			username props.getProperty('username')
			password props.getProperty('password')
			driver props.getProperty("driver")
		}
	}
}
